extends layout

block content
  nav.navbar.navbar-expand-lg.navbar-dark.bg-dark.fixed-top.justify-content-between
    a.navbar-brand(style='color: #fff') NHL Playoffs 2018
    button.navbar-toggler(type='button' data-toggle='collapse' data-target='#navbar')
      span.navbar-toggler-icon
    div.collapse.navbar-collapse#navbar
      ul.navbar-nav.ml-auto
        li.nav-item
          a.nav-link(href='/') Brackets
        li.nav-item
          a.nav-link(href='/standings') Standings
  div.container-fluid(style="padding-top:60px;" ng-controller='SeriesController')
    div.row.justify-content-center
      h3.text-center Series
    div.row(style='width:75%; margin:auto;')
      table.table
        thead
          tr
            th #
            th Game 1
            th Game 2
            th Game 3
            th Game 4
            th Game 5
            th Game 6
            th Game 7
        tbody
          tr(ng-repeat="member in series track by $index")
            td {{member.id}}
            - var i = 1;
            while i < 8
              td
                - var model = "member['game" + (i) + "']";
                div.btn-group-vertical.selection-buttons(style="box-shadow: none; background-color: transparent;")
                  button.btn.btn-secondary.btn-outline(type="button" ng-disabled="!member.enabled || !member['game" + i + "_enabled']" ng-class="{active: " + model + "== null}" ng-click="updateDB(member.id, " + i + ", null)") â€”
                  button.btn.btn-secondary.btn-outline(type="button" ng-style="{'background-color': " + model + "== member.team1_id || (member['game" + i + "_enabled'] && member.enabled) ? member.team1_color : ''}" ng-disabled="!member.enabled || !member['game" + i + "_enabled']" ng-class="{active: " + model + "== member.team1_id, bg_color: member.team1_id && " + model + "== member.team1_id || (member['game" + i + "_enabled'] && member.enabled)}" ng-click="updateDB(member.id, " + i + ", member.team1_id)") {{member.team1_id ? member.team1_id : 'TBD'}}
                  button.btn.btn-secondary.btn-outline(type="button" ng-style="{'background-color': " + model + "== member.team2_id || (member['game" + i + "_enabled'] && member.enabled) ? member.team2_color : ''}" ng-disabled="!member.enabled || !member['game" + i + "_enabled']" ng-class="{active: " + model + "== member.team2_id, bg_color: member.team2_id && " + model + "== member.team2_id || (member['game" + i + "_enabled'] && member.enabled)}" ng-click="updateDB(member.id, " + i + ", member.team2_id)") {{member.team2_id ? member.team2_id : 'TBD'}}
                - i++;
    div.modal.fade#winnerModal(tabindex="-1")
      div.modal-dialog.modal-sm.modal-dialog-centered
        div.modal-content
          div.modal-header
            h5.modal-title Winner!
          div.modal-body
            p#winningText -
          div.modal-footer
            button.btn.btn-secondary(type="button" data-dismiss="modal" ng-click="ignoreLast()") Cancel
            button.btn.btn-primary(type="button" data-dismiss="modal" ng-click="closeOut()") Confirm
  script.
      const SERIES = !{JSON.stringify(series)};
      const BRACKETS = !{JSON.stringify(brackets)};
      const TEAMS = !{JSON.stringify(teams)};